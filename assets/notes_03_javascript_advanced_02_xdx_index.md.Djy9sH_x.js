import{_ as s,c as i,o as a,a6 as n}from"./chunks/framework.BmyXVya9.js";const l="/web-design/assets/1.DR5ELrxk.png",t="/web-design/assets/2.Dtw9Zv0k.png",p="/web-design/assets/3.CnJ73V5c.png",h="/web-design/assets/4.GMdSeXlm.jpg",e="/web-design/assets/5.C7aIJOee.jpg",k="/web-design/assets/6.DAfxuAjo.jpg",E="/web-design/assets/7.r-8qbxZG.png",r="/web-design/assets/8.BvqK0PrY.png",d="/web-design/assets/9.B0-PXeiL.png",g="/web-design/assets/10.BMHuOAK_.png",A=JSON.parse('{"title":"第一章：网页的解析过程","description":"","frontmatter":{},"headers":[],"relativePath":"notes/03_javascript_advanced/02_xdx/index.md","filePath":"notes/03_javascript_advanced/02_xdx/index.md","lastUpdated":1705914313000}'),c={name:"notes/03_javascript_advanced/02_xdx/index.md"},o=n('<h1 id="第一章-网页的解析过程" tabindex="-1">第一章：网页的解析过程 <a class="header-anchor" href="#第一章-网页的解析过程" aria-label="Permalink to &quot;第一章：网页的解析过程&quot;">​</a></h1><h2 id="_1-1-概述" tabindex="-1">1.1 概述 <a class="header-anchor" href="#_1-1-概述" aria-label="Permalink to &quot;1.1 概述&quot;">​</a></h2><ul><li><p>网页的解析过程（一个网页 URL 从输入到浏览器页面显示，经历过怎么样的解析过程）：</p><ul><li>① 用户输入网址：用户在浏览器的地址栏中输入 URL（例如：<a href="https://www.example.com" target="_blank" rel="noreferrer">https://www.example.com</a>）。</li><li>② 协议解析：浏览器解析 URL 中的协议部分，确定要使用的传输协议。</li><li>③ 域名解析：浏览器提取 URL 中的域名部分。如果浏览器缓存中存在域名对应的 IP 地址，则直接跳到步骤 7；否则，执行以下步骤。</li><li>④ 发起 DNS 查询：浏览器向本地操作系统发起 DNS 查询请求，以查找域名对应的 IP 地址。</li><li>⑤ 本地 DNS 解析：本地操作系统查询自身的 DNS 缓存，如果缓存中存在域名对应的 IP 地址，则返回 IP 地址；否则，执行以下步骤。</li><li>⑥ 递归 DNS 解析：本地操作系统将发起递归的DNS解析请求，向根 DNS 服务器查询域名的顶级域名服务器（TLD 服务器）。</li><li>⑦ TLD 服务器查询：根 DNS 服务器返回 TLD 服务器的 IP 地址，本地操作系统继续向 TLD 服务器查询二级域名服务器的 IP 地址。</li><li>⑧ 二级域名服务器查询：TLD 服务器返回二级域名服务器的 IP 地址，本地操作系统继续向二级域名服务器查询主机名对应的 IP 地址。</li><li>⑨ IP 地址返回：二级域名服务器返回主机名对应的 IP 地址，本地操作系统将 IP 地址返回给浏览器。</li><li>⑩ 建立连接：浏览器使用获取到的 IP 地址和协议，建立与 Web 服务器的 TCP 连接。</li><li>⑪ 发送 HTTP 请求：浏览器向 Web 服务器发送 HTTP 请求，请求页面资源。</li><li>⑫ 服务器处理：Web 服务器接收到请求，查找并处理请求的资源，然后生成 HTTP 响应。</li><li>⑬ 响应返回：Web 服务器将生成的 HTTP 响应发送回浏览器。</li><li>⑭ 响应解析：浏览器解析 HTTP 响应，获取页面内容以及其他资源。</li><li>⑮ 页面渲染：浏览器根据 HTML 结构和 CSS 样式对页面进行渲染，同时执行 JavaScript 代码。</li><li>⑯ 显示页面：浏览器将渲染后的页面内容显示给用户。</li></ul></li><li><p>其流程图如下所示：</p></li></ul><p><img src="'+l+'" alt=""></p><h2 id="_1-2-简化网页解析过程-前端相关内容-⭐" tabindex="-1">1.2 简化网页解析过程（前端相关内容，⭐） <a class="header-anchor" href="#_1-2-简化网页解析过程-前端相关内容-⭐" aria-label="Permalink to &quot;1.2 简化网页解析过程（前端相关内容，⭐）&quot;">​</a></h2><ul><li>这里，对流程进行简化，只摘取<code>前端</code>相关部分，如下：</li></ul><p><img src="'+t+'" alt="image-20230803135641277"></p><blockquote><p>注意：</p><ul><li>浏览器并不会将 html、css 和 js 等静态资源一起下载，而是先下载 html 文件，对 html 文件进行解析并构建 DOM 树。</li><li>在构建 DOM 树的时候，如果遇到外部样式表（link 元素），浏览器才会开始下载 css 文件，但是并不会阻塞浏览器的解析，而是会继续构建 DOM 树；这样做的原因就是为了提高页面的渲染速度和用户体验。</li><li>同理，遇到外部 js 文件（script 元素），浏览器会开始下载 js 文件，但是和 css 不一样的是，会阻塞浏览器的解析，直到 js 文件下载完之后，并立即执行 js 中的代码；所以，建议将 script 元素写在 body 元素中的最后一行。</li></ul></blockquote><h1 id="第二章-浏览器渲染流程-⭐" tabindex="-1">第二章：浏览器渲染流程（⭐） <a class="header-anchor" href="#第二章-浏览器渲染流程-⭐" aria-label="Permalink to &quot;第二章：浏览器渲染流程（⭐）&quot;">​</a></h1><h2 id="_2-1-常见的浏览器内核" tabindex="-1">2.1 常见的浏览器内核 <a class="header-anchor" href="#_2-1-常见的浏览器内核" aria-label="Permalink to &quot;2.1 常见的浏览器内核&quot;">​</a></h2><ul><li><p>常见的浏览器内核：</p><ul><li>Trident （ 三叉戟）：<s>IE 浏览器</s>。</li><li>Gecko（ 壁虎） ：Mozilla Firefox。</li><li>Presto（急板乐曲）-&gt; Blink （眨眼）：Opera 。</li><li>Webkit ：Safari 。</li><li>Webkit -&gt; Blink ：Google Chrome，Edge 。</li></ul></li><li><p>我们经常说的<code>浏览器内核</code>指的是<code>浏览器的排版引擎</code>，也可以称为<code>排版引擎</code>（<code>浏览器引擎</code>、<code>页面渲染引擎</code>或<code>样版引擎</code>）。</p></li></ul><h2 id="_2-2-浏览器渲染页面的流程" tabindex="-1">2.2 浏览器渲染页面的流程 <a class="header-anchor" href="#_2-2-浏览器渲染页面的流程" aria-label="Permalink to &quot;2.2 浏览器渲染页面的流程&quot;">​</a></h2><h3 id="_2-2-1-概述" tabindex="-1">2.2.1 概述 <a class="header-anchor" href="#_2-2-1-概述" aria-label="Permalink to &quot;2.2.1 概述&quot;">​</a></h3><ul><li><p>浏览器渲染页面的详细过程：</p></li><li><p>① 构建文档对象模型（DOM）：浏览器下载 HTML 文件并解析它，创建一个 DOM 树，表示文档的结构。DOM 树是由一系列的元素节点（如标签）和文本节点组成的。</p></li><li><p>② 构建 CSS 对象模型（CSSOM）：浏览器下载外部 CSS 文件并解析它，创建一个 CSSOM 树，表示文档的样式信息。CSSOM 树包括了 CSS 规则、选择器和样式属性。</p></li><li><p>③ 合并 DOM 和 CSSOM，创建渲染树：将 DOM 树和 CSSOM 树合并，生成渲染树（Render Tree）。渲染树只包含需要显示的元素及其样式，用于准备页面的实际渲染。</p></li><li><p>④ 布局（Layout）：渲染树中的每个元素都被分配一个在屏幕上的精确位置和大小。这个过程被称为布局或重排（reflow）。浏览器计算元素的几何属性，如：位置、大小等。</p></li><li><p>⑤ 绘制（Painting）：根据布局信息，浏览器开始绘制页面的每个元素。这个过程包括：填充颜色、绘制边框、渲染文本等。</p></li><li><p>⑥ 栅格化（Rasterization）：将绘制的图形转换成位图，以便在屏幕上显示。这包括将矢量图形转换为像素。</p></li><li><p>⑦ 合成（Composition）：将多个图层（例如：页面内容、滚动条、浮动元素等）合成为最终的屏幕图像。这个过程包括透明度处理和层叠顺序。</p></li><li><p>⑧ 显示（Display）：最终的图像被发送到屏幕上显示给用户。</p></li><li><p>其图示如下：</p></li></ul><p><img src="'+p+'" alt="img"></p><h3 id="_2-2-2-解析一-html-的解析过程" tabindex="-1">2.2.2 解析一：HTML 的解析过程 <a class="header-anchor" href="#_2-2-2-解析一-html-的解析过程" aria-label="Permalink to &quot;2.2.2 解析一：HTML  的解析过程&quot;">​</a></h3><ul><li>默认情况下，服务器会将 index.html 文件返回给浏览器；所以，解析 HTML 文件是所有步骤的开始。</li><li>浏览器在解析 HTML 的时候，会在内存中构建 DOM Tree（DOM 树）。</li></ul><p><img src="'+h+'" alt=""></p><h3 id="_2-2-3-解析二-css-的解析过程" tabindex="-1">2.2.3 解析二：CSS 的解析过程 <a class="header-anchor" href="#_2-2-3-解析二-css-的解析过程" aria-label="Permalink to &quot;2.2.3 解析二：CSS 的解析过程&quot;">​</a></h3><ul><li>在解析 HTML 的过程中，如果遇到 link 元素，那么浏览器开启新的线程去下载对应的 CSS 文件（下载 CSS 文件的时候不会阻塞 DOM 的解析）。</li><li>当浏览器下载完 CSS 文件后，就会对 CSS 文件进行解析，<code>解析出对应的规则树</code>，我们称之为 <code>CSSOM（CSS Object Model，CSS 对象模型）</code>。</li></ul><p><img src="'+e+'" alt=""></p><h3 id="_2-2-4-解析四-构建渲染树-render-tree" tabindex="-1">2.2.4 解析四：构建渲染树（Render Tree） <a class="header-anchor" href="#_2-2-4-解析四-构建渲染树-render-tree" aria-label="Permalink to &quot;2.2.4 解析四：构建渲染树（Render Tree）&quot;">​</a></h3><ul><li>当有了 DOM Tree 和 CSSOM Tree 之后，就可以将两个结合（Attachment，附着）来构建 Render Tree （渲染树）了。</li></ul><p><img src="'+k+`" alt=""></p><blockquote><p>注意：</p><ul><li>① link 元素不会阻塞 DOM Tree 的构建过程，但是会阻塞 Render Tree 的构建过程。因为 Render Tree 在构建的时候，需要对应的 CSSOM Tree。</li><li>② Render Tree 和 DOM Tree 并不是一一对应的关系，因为对于 display 为 none 的元素，压根不会出现在 Render Tree 上。</li></ul></blockquote><h3 id="_2-2-5-解析四-布局-layout" tabindex="-1">2.2.5 解析四：布局（Layout） <a class="header-anchor" href="#_2-2-5-解析四-布局-layout" aria-label="Permalink to &quot;2.2.5 解析四：布局（Layout）&quot;">​</a></h3><ul><li>在渲染树（Render Tree）上运行<code>布局（Layout）</code>以计算每个节点的几何体。</li><li>渲染树会表示显示哪些节点以及其他样式，但是<code>不表示每个节点的尺寸、位置</code>等信息；</li><li>布局是确定呈现树中<code>所有节点的宽度、高度和位置</code>信息。</li></ul><h3 id="_2-2-6-解析五-绘制-painting" tabindex="-1">2.2.6 解析五：绘制（Painting） <a class="header-anchor" href="#_2-2-6-解析五-绘制-painting" aria-label="Permalink to &quot;2.2.6 解析五：绘制（Painting）&quot;">​</a></h3><ul><li>根据布局信息，浏览器开始绘制页面的每个元素。这个过程包括：填充颜色、绘制边框、渲染文本等。</li></ul><h1 id="第三章-回流和重绘解析-⭐" tabindex="-1">第三章：回流和重绘解析（⭐） <a class="header-anchor" href="#第三章-回流和重绘解析-⭐" aria-label="Permalink to &quot;第三章：回流和重绘解析（⭐）&quot;">​</a></h1><h2 id="_3-1-回流-reflow-重排" tabindex="-1">3.1 回流（reflow，重排） <a class="header-anchor" href="#_3-1-回流-reflow-重排" aria-label="Permalink to &quot;3.1 回流（reflow，重排）&quot;">​</a></h2><ul><li>第一次确定节点的大小和位置，称之为布局（layout）；之后对节点的大小和位置修改引起重新计算，称之为回流。</li></ul><blockquote><p>注意：回流是一种计算密集型操作，可能会导致性能问题，因此在前端开发中需要注意如何减少回流的频率。</p></blockquote><ul><li><p>什么情况下，会引起回流？</p><ul><li>① 添加或删除可见的 DOM 元素：会影响其他元素的布局。</li><li>② 改变元素的几何属性：改变元素的尺寸（宽度、高度）、位置（top、left）、边距（margin）、边框（border）、填充（padding）、字体大小（font-size）等。</li><li>③ 改变窗口 resize（尺寸） ：当浏览器窗口大小发生变化时，页面中的元素可能需要重新布局。</li><li>④ 激活CSS伪类：如 <code>:hover</code>、<code>:active</code> 等，改变元素的样式可能影响其几何属性。</li><li>⑤ 修改元素的内容：当文本内容发生变化时，可能会导致父元素尺寸的变化。</li><li>⑥ 调用 getComputedStyle 方法获取尺寸、位置信息。</li></ul></li><li><p>为了避免不必要的回流，可以采取以下的措施：</p><ul><li>① 使用 CSS 动画：CSS 动画使用 GPU 来执行，性能通常较好，避免了频繁的回流。可以使用<code>transform</code>和<code>opacity</code>等属性来实现动画效果。</li><li>② 修改样式时尽量一次性修改：避免多次修改单个元素的样式，最好将多个样式的修改集中到一起，这样可以减少回流的次数。</li><li>③ 尽量避免强制同步布局属性：一些属性（\`\`offsetWidth<code>、</code>offsetHeight<code>、</code>getComputedStyle\`等）会强制浏览器进行同步布局操作，尽量避免在频繁执行的代码中过多地使用这些属性。</li><li>④ 使用文档片段：当需要添加多个 DOM 元素时，可以使用文档片段（DocumentFragment）来进行操作，最后一次性添加到 DOM 树中，减少回流次数。</li><li>⑤ <code>使用虚拟 DOM ：在一些 JavaScript 框架（如：React、Vue）中，使用虚拟 DOM 可以优化 DOM 更新的过程，减少回流。</code></li><li>⑥ 使用<code>requestAnimationFrame</code>：在进行动画等操作时，使用<code>requestAnimationFrame</code>来执行更新，浏览器会在下一次重绘时进行回流和重绘，从而减少性能损耗。</li></ul></li></ul><blockquote><p>总结：减少回流次数是优化前端性能的重要手段之一，开发者可以通过合理的操作和技术选择来减少回流的影响。</p></blockquote><h2 id="_3-2-重绘-repaint" tabindex="-1">3.2 重绘（repaint） <a class="header-anchor" href="#_3-2-重绘-repaint" aria-label="Permalink to &quot;3.2 重绘（repaint）&quot;">​</a></h2><ul><li>第一次渲染内容称之为绘制（paint），之后重新渲染称之为重绘。</li><li>什么情况下，会引起重绘？ <ul><li>① 修改元素的样式属性：当修改元素的样式属性（改背景色、文字颜色、边框颜色、样式）时，浏览器可能会触发重绘，因为样式的改变会影响元素的外观。</li><li>② 页面滚动：页面滚动时，浏览器需要重新绘制可见区域的内容。</li><li>③ 添加、删除伪类：激活或取消激活元素的伪类（如：<code>:hover</code>、<code>:active</code>）会导致重绘。</li><li>④ 修改背景图片或渐变：改变元素的背景图片、颜色渐变等会引起重绘。</li></ul></li></ul><blockquote><p>注意：</p><ul><li>重绘本身的成本通常比回流要小，通常而言，一般会考虑避免不重要的回流。</li><li>回流一定会引起重绘，回流是一件很消耗性能的事情，所以在开发中要尽量避免发生回流。</li></ul></blockquote><h1 id="第四章-合成和性能优化" tabindex="-1">第四章：合成和性能优化 <a class="header-anchor" href="#第四章-合成和性能优化" aria-label="Permalink to &quot;第四章：合成和性能优化&quot;">​</a></h1><ul><li>合成（Composition）：将多个图层（例如：页面内容、滚动条、浮动元素等）合成为最终的屏幕图像。这个过程包括透明度处理和层叠顺序。</li><li>合成是浏览器的一种优化手段。</li><li>默认情况下，标准流中的内容都会被绘制在同一个图层（Layer）中；但是，一些特殊的属性，会创建一个新的合成层（Compositing Layer），并且新的图层可以利用 GPU 来加速绘制，因为<code>每个合成层都是单独渲染</code>的。</li><li>下面是常见的可以形成新的合成层的属性： <ul><li><code>3D transforms</code></li><li><code>video</code>、<code>canvas</code>、<code>iframe</code></li><li><code>opacity 动画转换时</code></li><li><code>position: fixed</code></li><li><code>will-change</code>：一个实验性的属性，提前告诉浏览器元素可能发生哪些变化</li><li><code>animation 或 transition 设置了opacity、transform</code></li></ul></li></ul><blockquote><p>注意：分层确实可以提高性能，但是它以内存管理为代价，因此不应作为 web 性能优化策略的一部分过度使用。</p></blockquote><ul><li>证明：合成的存在</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;IE=edge&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http-equiv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X-UA-Compatible&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Title&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      font-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      font-weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bold</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    p</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;"> span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">red</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    .box</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      background-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fixed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;你好啊&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;呵呵哒&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;box&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><img src="`+E+'" alt="image-20230803172319513"></p><h1 id="第五章-defer-和-sync-属性-⭐" tabindex="-1">第五章：defer 和 sync 属性（⭐） <a class="header-anchor" href="#第五章-defer-和-sync-属性-⭐" aria-label="Permalink to &quot;第五章：defer 和 sync 属性（⭐）&quot;">​</a></h1><h2 id="_5-1-概述" tabindex="-1">5.1 概述 <a class="header-anchor" href="#_5-1-概述" aria-label="Permalink to &quot;5.1 概述&quot;">​</a></h2><ul><li>回顾一下，浏览器的渲染过程：</li></ul><p><img src="'+r+'" alt="image-20230803172806281"></p><ul><li><p>那么，HTML 文件中的 script 元素和 JavaScript 的关系是什么？</p><ul><li>其实，浏览器在解析 HTML 的过程中，<code>遇到 script 元素是不会继续构建 DOM 树的</code>。</li><li>它会<code>停止继续构建</code>，然后<code>下载 JavaScript 代码</code>，并<code>执行 JavaScript 代码</code>。</li><li>只有<code>等到 JavaScript 代码执行结束后</code>，才会<code>继续解析 HTML</code> ，<code>构建 DOM 树</code>。</li></ul></li><li><p>为什么要这么做？</p><ul><li>因为 <code>JavaScript 其实就是用来操作 DOM 以及修改 DOM 的</code>。</li><li>如果我们<code>等到 DOM 树构建完毕并且渲染的时候</code>，<code>再去执行 JavaScript 代码</code>，<code>会造成严重的回流和重绘</code>，<code>影响页面的性能</code>。</li><li>所以，<code>当在 解析 HTML 的时候</code>，<code>如果遇到 script 元素时</code>，<code>优先下载和执行 JavaScript 代码</code>，<code>再继续构建 DOM 树</code>。</li></ul></li><li><p>但是，在现代开发模式（React、Vue 等）中，如下所示（React 项目）：</p></li></ul><p><img src="'+d+`" alt="image-20230803172552076"></p><ul><li>我们可以发现整个项目中就<code>一个 index.html 的文件</code>，<code>其余的都是 css 或 js 文件</code>，那么<code>浏览器需要处理的时间更长（因为 js 比 html 要多）</code>，如下所示：</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">doctype</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;icon&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/favicon.ico&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width,initial-scale=1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;theme-color&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#000000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;description&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Web site created using create-react-app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;apple-touch-icon&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/logo192.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;manifest&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/manifest.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;React App&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- 遇到 script 元素会阻塞页面的解析 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/static/js/main.0d924947.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/static/css/main.073c9b0a.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stylesheet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">noscript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;You need to enable JavaScript to run this app.&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">noscript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li><code>会造成页面的解析阻塞</code>，<code>在 JavaScrpit 文件下载并执行完成之前</code>，<code>用户在界面上什么也看不到</code>；那么，现在的开发模式，又是怎么解决这个问题的？</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">doctype</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;icon&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/favicon.ico&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width,initial-scale=1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;theme-color&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#000000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;description&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Web site created using create-react-app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;apple-touch-icon&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/logo192.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;manifest&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/manifest.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;React App&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- script 元素提供了两个属性 defer 和 async --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defer</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/static/js/main.0d924947.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/static/css/main.073c9b0a.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stylesheet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">noscript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;You need to enable JavaScript to run this app.&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">noscript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li>如果，我们将 React 项目打包之后，就会形成上面的代码，会发现 <code>script</code> 元素上出现了 <code>defer</code> 属性；这也是，现在开发模式为了解决这个问题的思路之一（其实，<code>script</code> 元素还有 <code>async</code> 属性）。</li></ul><blockquote><p>注意：这只是现代开发框架解决性能的方式之一，像 React 等还通过异步渲染、调度算法、虚拟列表、懒加载、代码分割等来进一步提高页面的性能和用户体验。</p></blockquote><ul><li>那么，<code>script</code> 元素的 <code>defer</code> 属性和 <code>async</code> 属性到底有什么作用？</li></ul><h2 id="_5-2-defer-属性" tabindex="-1">5.2 defer 属性 <a class="header-anchor" href="#_5-2-defer-属性" aria-label="Permalink to &quot;5.2 defer 属性&quot;">​</a></h2><ul><li><code>defer</code> 属性可以<code>告诉浏览器不要等待 JavaScript 脚本下载</code>，<code>而是继续解析 HTML，构建 DOM Tree</code>。 <ul><li><code>JavaScript 脚本是由浏览器开启一个新的线程来进行下载的，所以不会阻塞 DOM Tree 的构建过程</code>。</li><li><code>如果 JavaScript 脚本提前下载好了，它会等到 DOM Tree 构建完成，在 DOMContentLoaded 事件之前先执行 defer 中的代码</code>。</li></ul></li><li>所以，<code>DOMContentLoaded</code> 总是会等待 <code>defer</code> 中的代码<code>先执行完毕</code>；并且，<code>多个带有 defer 的脚本是可以保证正确的顺序执行的</code>。</li><li><code>从某种角度而言，defer 可以提高页面的性能，推荐放到 head 元素中</code>。</li></ul><blockquote><p>注意：</p><ul><li>在实际开发中，我们都是结构、样式和行为分离的；换言之，就是 html、css 和 js 文件独立的；不会，一股脑的都写到 html 中的。</li><li>defer 仅适用于外部的脚本，对于 script 中的内容默认是忽略的。</li></ul></blockquote><ul><li>示例：</li><li>项目结构：</li></ul><p><img src="`+g+`" alt="image-20230804091652458"></p><ul><li>index.html</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;IE=edge&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http-equiv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X-UA-Compatible&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Title&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      font-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      font-weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bold</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    p</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;"> span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">red</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    .box</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      background-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fixed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- 从某种角度来说，defer可以提高页面的性能，并且推荐放到head元素中  --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defer</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./js/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;你好啊&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;呵呵哒&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;box&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DOMContentLoaded&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(abc)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><ul><li>js/index.js</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> abc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;123&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_5-3-async-属性" tabindex="-1">5.3 async 属性 <a class="header-anchor" href="#_5-3-async-属性" aria-label="Permalink to &quot;5.3 async 属性&quot;">​</a></h2><ul><li>async 属性与 defer 有些类似，它也<code>能够让脚本不阻塞页面</code>。</li><li>async 是让一个脚本完全独立的: <ul><li>浏览器<code>不会因 async 脚本而阻塞（与 defer 类似）</code>。</li><li><code>async 脚本不能保证顺序，它是独立下载、独立运行，不会等待其他脚本</code>。</li><li><code>async 不会能保证在 DOMContentLoaded 之前或者之后执行</code>。</li></ul></li></ul><h2 id="_5-3-应用场景" tabindex="-1">5.3 应用场景 <a class="header-anchor" href="#_5-3-应用场景" aria-label="Permalink to &quot;5.3 应用场景&quot;">​</a></h2><ul><li>defer 和 async 是用于控制 JavaScript 脚本加载和执行的两个属性，常用于 script 元素中。 <ul><li>defer 属性用于指定脚本的延迟加载，即脚本会在 HTML 解析完毕后再执行。defer 脚本会按照它们在 HTML 中出现的顺序依次加载，但是在整个文档解析完成之后才会执行。defer 适用于那些不需要立即执行的脚本，例如：统计代码、初始化脚本等。使用 defer 属性可以避免脚本阻塞 HTML 解析，提高页面加载性能。</li><li>async 属性用于指定脚本的异步加载和执行，即脚本的加载和执行不会阻塞 HTML 解析。async 脚本会在加载完成后立即执行，不考虑其在 HTML 中的顺序。async 适用于那些不依赖于其他脚本的独立脚本，例如：一些独立的功能模块、第三方库等。使用 async 属性可以加快页面加载速度，但是需要注意脚本之间的依赖关系。</li></ul></li><li>应用场景： <ul><li>当脚本不需要立即执行，且依赖于其他脚本时，可以使用 defer 属性。</li><li>当脚本独立，不依赖于其他脚本时，可以使用 async 属性。</li><li>当需要控制脚本的加载顺序，并且不希望脚本阻塞 HTML 解析时，可以使用 defer 属性。</li></ul></li></ul><blockquote><p>注意：defer 和 async 属性只对外部脚本（通过 src 属性引入的脚本）有效，内联脚本（直接在 script 元素中编写的脚本）会忽略这两个属性。</p></blockquote>`,71),y=[o];function u(b,F,m,C,q,D){return a(),i("div",null,y)}const f=s(c,[["render",u]]);export{A as __pageData,f as default};
